(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{283:(t,e,r)=>{"use strict";r.d(e,{A:()=>g,O:()=>y});var n=r(5155),a=r(2115),s=r(2248),o=r(9995),i=r(7016),c=r(2082),u=r(4462),l=r(9829),d=r(194),h=r(5695);let w=(0,a.createContext)(void 0),y=t=>{let{children:e}=t,[r,y]=(0,a.useState)(null),[g,E]=(0,a.useState)(!1),[R,f]=(0,a.useState)(!0),m=(0,h.useRouter)();(0,a.useEffect)(()=>{v()},[]);let v=async()=>{try{f(!0);let t=await (0,s.H)(),e=await (0,o.T)();y({username:t.username,email:e.email||"",tenantId:e["custom:tenantId"]||"",role:e["custom:role"]||"user",attributes:e}),E(!0)}catch(t){y(null),E(!1)}finally{f(!1)}},O=async(t,e)=>{try{f(!0),await (0,i.J)({username:t,password:e});let r=await (0,o.T)();y({username:t,email:r.email||"",tenantId:r["custom:tenantId"]||"",role:r["custom:role"]||"user",attributes:r}),E(!0),m.push("/dashboard")}catch(t){throw console.error("Error signing in:",t),t}finally{f(!1)}},p=async()=>{try{f(!0),await (0,c.C)(),y(null),E(!1),m.push("/login")}catch(t){throw console.error("Error signing out:",t),t}finally{f(!1)}},N=async(t,e,r)=>{try{f(!0),await (0,u.H)({username:t,password:e,options:{userAttributes:{email:t,"custom:tenantId":r}}})}catch(t){throw console.error("Error signing up:",t),t}finally{f(!1)}},I=async(t,e)=>{try{f(!0),await (0,l.z)({username:t,confirmationCode:e})}catch(t){throw console.error("Error confirming sign up:",t),t}finally{f(!1)}},T=async t=>{try{f(!0),await (0,d.x)({username:t})}catch(t){throw console.error("Error requesting password reset:",t),t}finally{f(!1)}},P=async(t,e,r)=>{try{f(!0),await (0,d.x)({username:t,confirmationCode:e,newPassword:r})}catch(t){throw console.error("Error resetting password:",t),t}finally{f(!1)}};return(0,n.jsx)(w.Provider,{value:{user:r,isAuthenticated:g,isLoading:R,signIn:O,signOut:p,signUp:N,confirmSignUp:I,forgotPassword:T,resetPassword:P},children:e})},g=()=>{let t=(0,a.useContext)(w);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},347:()=>{},722:(t,e,r)=>{"use strict";r.d(e,{DL:()=>c,IN:()=>l,r6:()=>s,we:()=>u});let n=(0,r(7126).D)(),a="TechnoagentesAPI";var s=function(t){return t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN",t.NOT_FOUND="NOT_FOUND",t.VALIDATION_ERROR="VALIDATION_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.NETWORK_ERROR="NETWORK_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR",t}({});class o extends Error{constructor(t,e,r,n){super(t),this.name="ApiError",this.type=e,this.statusCode=r,this.details=n}}let i=t=>{var e,r;if(console.error("API Error:",t),!t.response)return new o("Error de conexi\xf3n. Por favor, verifica tu conexi\xf3n a internet.","NETWORK_ERROR");let n=null==(e=t.response)?void 0:e.status,a=null==(r=t.response)?void 0:r.data;switch(n){case 401:return new o("No autorizado. Por favor, inicia sesi\xf3n nuevamente.","UNAUTHORIZED",n,a);case 403:return new o("No tienes permisos para realizar esta acci\xf3n.","FORBIDDEN",n,a);case 404:return new o("Recurso no encontrado.","NOT_FOUND",n,a);case 400:case 422:return new o("Error de validaci\xf3n. Por favor, verifica los datos ingresados.","VALIDATION_ERROR",n,a);case 500:case 502:case 503:case 504:return new o("Error del servidor. Por favor, intenta m\xe1s tarde.","SERVER_ERROR",n,a);default:return new o("Error desconocido. Por favor, intenta m\xe1s tarde.","UNKNOWN_ERROR",n,a)}},c={getUsers:async()=>{try{return(await n.get(a,"/tenants/users",{})).users||[]}catch(t){throw i(t)}},getUser:async t=>{try{return await n.get(a,"/tenants/users/".concat(t),{})}catch(t){throw i(t)}},createUser:async t=>{try{return await n.post(a,"/tenants/users",{body:t})}catch(t){throw i(t)}},updateUser:async(t,e)=>{try{return await n.put(a,"/tenants/users/".concat(t),{body:e})}catch(t){throw i(t)}},deleteUser:async t=>{try{await n.del(a,"/tenants/users/".concat(t),{})}catch(t){throw i(t)}}},u={getConfig:async t=>{try{return await n.get(a,"/tenants/configurations/".concat(t),{})}catch(t){throw i(t)}},updateConfig:async(t,e)=>{try{return await n.put(a,"/tenants/configurations/".concat(t),{body:e})}catch(t){throw i(t)}}},l={getCurrentTenant:async()=>{try{return await n.get(a,"/tenants/current",{})}catch(t){throw i(t)}},getTenant:async t=>{try{return await n.get(a,"/tenants/".concat(t),{})}catch(t){throw i(t)}},updateTenant:async(t,e)=>{try{return await n.put(a,"/tenants/".concat(t),{body:e})}catch(t){throw i(t)}},createTenant:async t=>{try{return await n.post(a,"/tenants",{body:t})}catch(t){throw i(t)}}}},6069:(t,e,r)=>{Promise.resolve().then(r.t.bind(r,2093,23)),Promise.resolve().then(r.t.bind(r,7735,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,8412))},7737:(t,e,r)=>{"use strict";r.d(e,{K:()=>u,W:()=>c});var n=r(5155),a=r(2115),s=r(283),o=r(722);let i=(0,a.createContext)(void 0),c=t=>{let{children:e}=t,[r,c]=(0,a.useState)(null),[u,l]=(0,a.useState)(!1),[d,h]=(0,a.useState)(null),{user:w,isAuthenticated:y}=(0,s.A)();(0,a.useEffect)(()=>{y&&w&&g()},[y,w]);let g=async()=>{if(null==w?void 0:w.tenantId)try{l(!0),h(null);let t=await o.IN.getCurrentTenant(),e=await o.we.getConfig("general");c({...t,tenantId:t.id,configuration:e.settings})}catch(t){console.error("Error fetching tenant data:",t),h(t)}finally{l(!1)}},E=async(t,e)=>{if(null==w?void 0:w.tenantId)try{l(!0),h(null),await o.we.updateConfig(t,{settings:e}),r&&c({...r,configuration:{...r.configuration,[t]:e}})}catch(e){throw console.error("Error updating tenant ".concat(t," configuration:"),e),h(e),e}finally{l(!1)}};return(0,n.jsx)(i.Provider,{value:{tenant:r,isLoading:u,error:d,fetchTenant:g,updateTenantConfig:E},children:e})},u=()=>{let t=(0,a.useContext)(i);if(void 0===t)throw Error("useTenant must be used within a TenantProvider");return t}},8412:(t,e,r)=>{"use strict";r.d(e,{Providers:()=>g});var n=r(5155),a=r(2115),s=r(2922),o=r(6715),i=r(283),c=r(7737),u=r(3064),l=r(4572),d=r(3732);let h={Auth:{Cognito:{region:"us-east-1",userPoolId:"us-east-1_lJikpz0Bu",userPoolClientId:"67tqo3vsmpg25bt50f1sud1rk0"}},API:{REST:{TechnoagentesAPI:{endpoint:"https://z3egsgkq28.execute-api.us-east-1.amazonaws.com/dev",region:"us-east-1",customHeaders:async()=>{try{var t,e;return{Authorization:(null==(e=(await (0,d.$)()).tokens)||null==(t=e.idToken)?void 0:t.toString())||""}}catch(t){return console.error("Error getting auth token for API request:",t),{}}}}}}},w=()=>{u.E.configure(h),l.Q.setKeyValueStorage({getItem:async t=>{try{let t=await (0,d.$)();if(t.tokens)return t.tokens.idToken.toString();return null}catch(t){return console.error("Error getting auth token:",t),null}},removeItem:async()=>{},setItem:async()=>{}})},y=new s.E;function g(t){let{children:e}=t;return(0,a.useEffect)(()=>{w()},[]),(0,n.jsx)(o.Ht,{client:y,children:(0,n.jsx)(i.O,{children:(0,n.jsx)(c.W,{children:e})})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[360,178,631,441,684,358],()=>e(6069)),_N_E=t.O()}]);