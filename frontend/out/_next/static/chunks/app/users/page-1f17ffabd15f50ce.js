(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{5800:(e,s,t)=>{Promise.resolve().then(t.bind(t,8199))},5876:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(5155),r=t(2115),l=t(5695),i=t(283);let d=e=>{let{children:s,adminOnly:t=!1}=e,{isAuthenticated:d,isLoading:n,user:m}=(0,i.A)(),o=(0,l.useRouter)();return((0,r.useEffect)(()=>{!n&&(d?t&&(null==m?void 0:m.role)!=="admin"&&o.push("/dashboard"):o.push("/login"))},[d,n,o,t,m]),n)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 border-gray-200 rounded-full loader border-t-indigo-600 animate-spin"})}):!d||t&&(null==m?void 0:m.role)!=="admin"?null:(0,a.jsx)(a.Fragment,{children:s})}},8199:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),r=t(2115),l=t(544),i=t(5876),d=t(722);function n(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[m,o]=(0,r.useState)(null),[c,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)({email:"",firstName:"",lastName:"",role:"USER"});(0,r.useEffect)(()=>{p()},[]);let p=async()=>{try{n(!0),o(null);let e=(await d.DL.getUsers()).map(e=>({id:e.id,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,status:e.status||"ACTIVE",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt}));s(e)}catch(e){console.error("Error fetching users:",e),e.type===d.r6.NETWORK_ERROR||e.type===d.r6.NOT_FOUND?(s([{id:"user-001",email:"admin@example.com",firstName:"Admin",lastName:"User",role:"ADMIN",status:"ACTIVE",createdAt:"2023-01-01T00:00:00Z"},{id:"user-002",email:"usuario1@example.com",firstName:"Usuario",lastName:"Uno",role:"USER",status:"ACTIVE",createdAt:"2023-01-02T00:00:00Z"}]),o("Usando datos de demostraci\xf3n: La API no est\xe1 disponible")):o(e.message||"Error al obtener los usuarios")}finally{n(!1)}},g=async t=>{t.preventDefault();try{n(!0),o(null);let t={email:u.email,firstName:u.firstName,lastName:u.lastName,role:u.role,sendInvitation:!0},a=await d.DL.createUser(t),r={id:a.id,email:a.email,firstName:a.firstName,lastName:a.lastName,role:a.role,status:a.status||"ACTIVE",createdAt:a.createdAt||new Date().toISOString(),updatedAt:a.updatedAt};s([...e,r]),x(!1),h({email:"",firstName:"",lastName:"",role:"USER"})}catch(e){console.error("Error creating user:",e),o(e.message||"Error al crear el usuario")}finally{n(!1)}},f=async t=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar este usuario?"))try{n(!0),o(null),await d.DL.deleteUser(t),s(e.filter(e=>e.id!==t))}catch(e){console.error("Error deleting user:",e),o(e.message||"Error al eliminar el usuario")}finally{n(!1)}};return(0,a.jsx)(i.A,{children:(0,a.jsxs)(l.A,{children:[(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 md:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Usuarios"}),(0,a.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Agregar Usuario"})]})}),(0,a.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 md:px-8",children:(0,a.jsxs)("div",{className:"py-4",children:[m&&(0,a.jsx)("div",{className:"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg",role:"alert",children:m}),(0,a.jsx)("div",{className:"flex flex-col mt-8",children:(0,a.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,a.jsx)("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Nombre"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Email"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Rol"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Estado"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Fecha de Creaci\xf3n"}),(0,a.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,a.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-3 py-4 text-sm text-center text-gray-500",children:"Cargando usuarios..."})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-3 py-4 text-sm text-center text-gray-500",children:"No hay usuarios para mostrar"})}):e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.email}),(0,a.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 text-xs font-semibold leading-5 rounded-full ".concat("ADMIN"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"ADMIN"===e.role?"Administrador":"Usuario"})}),(0,a.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 text-xs font-semibold leading-5 rounded-full ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"ACTIVE"===e.status?"Activo":"Inactivo"})}),(0,a.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"relative py-4 pl-3 pr-4 text-sm font-medium text-right whitespace-nowrap sm:pr-6",children:(0,a.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})})]},e.id))})]})})})})})]})})]}),c&&(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,a.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,a.jsx)("div",{className:"inline-block px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Agregar Usuario"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,a.jsx)("input",{type:"text",name:"firstName",id:"firstName",value:u.firstName,onChange:e=>h({...u,firstName:e.target.value}),className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Apellido"}),(0,a.jsx)("input",{type:"text",name:"lastName",id:"lastName",value:u.lastName,onChange:e=>h({...u,lastName:e.target.value}),className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",id:"email",value:u.email,onChange:e=>h({...u,email:e.target.value}),className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Rol"}),(0,a.jsxs)("select",{id:"role",name:"role",value:u.role,onChange:e=>h({...u,role:e.target.value}),className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,a.jsx)("option",{value:"USER",children:"Usuario"}),(0,a.jsx)("option",{value:"ADMIN",children:"Administrador"})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,a.jsx)("button",{type:"submit",className:"inline-flex justify-center w-full px-4 py-2 text-base font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm",children:"Guardar"}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!1),className:"inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancelar"})]})]})})]})})})]})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[178,874,544,441,684,358],()=>s(5800)),_N_E=e.O()}]);